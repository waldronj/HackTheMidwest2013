@{
    ViewBag.Title = "Index";
}
@model HackMW2013.ViewModels.ManageTree.ManageTreeModel
<h2>Manage Tree @Model.Tree.Name</h2>
<div class="row">
    <div class="span6">
        <h3>Add Member</h3>
        @using (Html.BeginForm("AddMember", "ManageTree", new { id = Model.Tree.Id }))
        { 
            <label>Name:</label>
            @Html.EditorFor(x => x.Name)
            <br />
            <label>Phone:</label>
            @Html.EditorFor(x => x.Phone)
            <br />
            <label>Email:</label>
            @Html.EditorFor(x => x.Email)
            <br />
            <input type="submit" class="btn btn-primary btn-large"/>
        }
    </div>
    <div class="span6">
        <table class="table table-striped table-hover">
            <tr>
                <td>Name</td>
                <td>Phone</td>
                <td>Email</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
            </tr>
            @foreach (var member in Model.Tree.Members)
            {
                <tr>
                    <td>@member.Name</td>
                    <td>@member.PhoneNumber</td>
                    <td>@member.Email</td>
                    <td>@Html.ActionLink("edit", "EditMember", new { treeId = Model.Tree.Id, memberId = member.Id })</td>
                    <td>@using (Html.BeginForm("RemoveMember", "ManageTree", new { id = Model.Tree.Id, memberId = member.Id }))
                        {
                            @Html.ActionLink("remove", "RemoveMember", "ManageTree", null, new { @class = "btn btn-primary", onclick = "$(this).closest('form')[0].submit(); return false;" })
                        }</td>
                </tr>
            }
        </table>
    </div>

</div>